\documentclass{article}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{remark}[theorem]{Remark}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\begin{document}

\section{Introduction}
\section{Preliminaries}
First we must clarify a few frequently used definitions and results.

\begin{definition}
    We call a set $S$ a \textit{semigroup} if it has an associative binary operation
    that sends a pair of elements $(a, b) \mapsto ab$ for all $a, b \in S$.
\end{definition}

\begin{definition}
    We call a semigroup $S$ an \textit{inverse semigroup} if for every $s \in S$, there exists a unique
    element $s^* \in S$ such that $s = ss^*s$ and $s^* = s^*ss^*$. We call $s^*$ the \textit{inverse} of $s$.
    If $S$ contains a zero element, we call it an \textit{inverse semigroup with zero}.
\end{definition}

\begin{definition}
    An element $e$ of an inverse semigroup $S$ is called an \textit{idempotent} if
    $e = e^2$. Note that for all idempotents, $e = e^*$, and for all elements $s$ in
    an inverse semigroup, $ss^*$ and $s^*s$ are idempotent. We denote the set of idempotents
    on $S$ by $E(S)$.
\end{definition}

\begin{remark}
    If $S$ is an inverse semigroup, for $e$, $f \in E(S)$, $ef = fe$.
\end{remark}
In other words, the idempotents of an inverse semigroup commute. (A proof of this can be found in Kyle's paper. cite this properly)

\begin{definition}
    Let $S$ be a set. A relation $\leq$ on $S$ is called a \textit{partial order} if
    \begin{itemize}
        \item It is reflexive; $a \leq a \quad \forall a \in S$
        \item It is antisymmetric; $a \leq b$ and $b \leq a \implies a = b \quad \forall a, b \in S$
        \item It is transitive; $a \leq b$ and $b \leq c \implies a \leq c \quad \forall a, b, c \in S$
    \end{itemize}
    A set $S$ paired with a \textit{partial order} is called a partially ordered set, or a \textit{poset}.
\end{definition}

% \begin{definition}
%     Let $S$ be a poset. If for every pair $(a, b) \in S \times S$, we can 
%     define a \textit{greatest lower bound} $a \land b$, we call $S$ a \textit{meet semilattice},
%     where $a \land b$ is called the \textit{meet} of $a$ and $b$.
% \end{definition}

\section{The Tight Spectrum of an Inverse Semigroup}
Now that we have a basic set of definitions in place, we can start to explore
the set of idempotents on inverse semigroups. For this section, let $S$ be an
inverse semigroup with zero. We can define a partial order on $E(S)$, saying that $e \leq f \iff e = ef$.
This can be extended to the entire set $S$, but in this paper we are only concerned with idempotents.
(mention it's a meet semilattice, point to ISG primer?)

\begin{definition}
    A nonempty proper subset $\xi \subset E(S)$ is called a \textit{filter} on $S$ if
    \begin{enumerate}
        \item For $e, f \in \xi$, $ef \in \xi$
        \item For $x \in \xi$, $e \in E(S)$, $x \leq e \implies e \in \xi$
    \end{enumerate}
\end{definition}
Subsets that only satisfy the first condition are called \textit{prefilters}.
We denote the set of filters on $S$ by $\hat{E}_0^S$. 
An important remark is that the zero element of $S$ is not contained 
inside any filters. If $0 \in \xi$, condition (2) would imply that $\xi = S$,
which violates our definition. We can consider $\hat{E}_0^S$ a subset of $\{0, 1\}^{E(S)}$,
and thus endow it with the product topology inherited from $\{0, 1\}^{E(S)}$. Equivalently,
let $X$, $Y$ be finite subsets of $E(S)$. Define $\mathcal{U}(X, Y) := \{\xi \in \hat{E}_0\text{: } X \subseteq \xi \text{ and } Y \cap \xi = \emptyset\}$.
Sets of the form $\mathcal{U}(X, Y)$ form a basis for the topology on the set of filters. With this topology, the topological
space $\hat{E}_0^S$ is called the \textit{Exel spectrum} of $S$.

\begin{definition}
    A filter $\eta \in \hat{E}_0$ is called an \textit{ultrafilter} if it is 
    maximal with respect to set inclusion. In other words, it is not contained
    inside another filter.
\end{definition}
We define the subspace $\hat{E}_\infty^S := \{\xi \in \hat{E}_0^S\text{: $\xi$ is an ultrafilter}\}$. Note that if
the inverse semigroup is obvious, we need not superscript $S$ when describing the spectrum.

\begin{remark} For an ultrafilter $\eta \in \hat{E}_\infty$ and $e \in E(S)$, $e \notin \eta \implies ef = 0$ for some $f \in \eta$. \end{remark}

\begin{theorem} Every filter is contained inside an ultrafilter. \end{theorem}
\begin{proof}
    Let $\xi \in \hat{E}_0$. To prove this, we hope to use Zorn's lemma. We define the set 
    $\mathcal{P} := \{\mathcal{F} \in \hat{E_0} \text{: } \xi \subseteq \mathcal{F}\}$ and 
    we order $\mathcal{P}$ by set inclusion. Let $\mathcal{C} \subseteq \mathcal{P}$ be a chain. 
    If we take $\mathcal{F} := \bigcup_{\zeta \in \mathcal{C}} \zeta$, it is clear that $\mathcal{F}$ is 
    an upper bound of $\mathcal{C}$ and $\xi \subseteq \mathcal{F}$. To show that $\mathcal{F} \in \mathcal{P}$, we
    need only show that it is a filter. Suppose $f$, $g \in \mathcal{F}$. Then $f \in \zeta_1$, $g \in \zeta_2$ for
    some $\zeta_1$, $\zeta_2 \in \mathcal{C}$. Since $\mathcal{C}$ is totally ordered, without loss of generality we
    assume $\zeta_1 \subseteq \zeta_2$. Then $f$, $g \in \zeta_2 \implies fg \in \zeta_2 \subseteq \mathcal{F}$.
    So $\mathcal{F}$ is a prefilter. Now suppose $f \in \mathcal{F}$, $e \in E(S)$ with $f \leq e$. Then $f \in \zeta$ for
    some $\zeta \in \mathcal{C}$, but since $\zeta$ is a filter, $e \in \zeta \subseteq \mathcal{F}$. So $\mathcal{F}$ is
    upward closed, and hence a filter. By Zorn's lemma, there exists $\eta \in \mathcal{P}$ such that $\eta$ is maximal
    with respect to set inclusion. This is our definition of an ultrafilter; we have shown that $\forall \xi \in \hat{E}_0$, $\exists \eta \in \hat{E}_\infty$ with
    $\xi \subseteq \eta$.
\end{proof}

We can now begin to shift our focus towards the tight spectrum, which is the main topic of this section.

\begin{definition} Let $X$, $Y$ be finite subsets of $E(S)$. We define
    \begin{align*} 
        E^{X, Y} &:= \{ e \in E(S) \text{: } e \leq x \ \forall x \in x \text{ and } ey = 0 \ \forall y \in Y \}
    \end{align*}
\end{definition}

\begin{definition}
    Given $\mathcal{E} \subseteq E(S)$, we call $Z \subseteq E(S)$ an \textit{outer cover} of $\mathcal{E}$ if
    $\forall e \in \mathcal{E}$, $\exists z \in Z$ with $ez \neq 0$. If is $Z$ an outer cover of $\mathcal{E}$ 
    and $Z \subseteq \mathcal{E}$, we say $Z$ is a \textit{cover} of $\mathcal{E}$.
\end{definition}

\begin{lemma} Let $X$, $Y$ be finite subsets of $E(S)$, and let $x =$ min$(X)$. Then
    \begin{enumerate}
        \item[(i)] $E^{X, Y} = E^{\{x\}, Y}$
        \item[(ii)] $\mathcal{U}(X, Y) = \mathcal{U}(\{x\}, Y)$
    \end{enumerate}
\end{lemma}
\begin{proof}
    \begin{enumerate}
        \item[(i)] 
            \begin{align*}
                E^{X, Y} &= \{ e \in E(S)\text{: } e \leq x \ \forall x \in x \text{ and } ey = 0 \ \forall y \in Y \} \\
                         &= \{ e \in E(S)\text{: } e \leq \text{min}(X) \text{ and } ey = 0 \ \forall y \in Y \} \\
                         &= E^{\{x\}, Y}
            \end{align*}
        \item[(ii)]
            Since $\{x\} \subseteq X$, $\mathcal{U}(X, Y) \subseteq \mathcal{U}(\{x\}, Y)$. Now suppose $\xi \in \mathcal{U}(\{x\}, Y)$.
            For $\chi \in X$, $x \leq \chi \implies \chi \in \xi$. Thus $X \subseteq \xi$, so $\xi \in \mathcal{U}(X, Y)$. We have
            shown that $\mathcal{U}(X, Y)$ and $\mathcal{U}(\{x\}, Y)$ are subsets of eachother, so they are equal.
    \end{enumerate}
\end{proof}
When we are working with $\mathcal{U}(X, Y)$ and $E^{X, Y}$, this lemma allows us the freedom of only considering the case
where $X$ is a singleton set.

\begin{definition} 
    Let $\xi \in \hat{E}_0$. We say that $\xi$ is a \textit{tight filter} if for all finite subsets $X$, $Y \subseteq E(S)$
    and for all finite covers $Z$ of $E^{X, Y}$, $\xi \in \mathcal{U}(X, Y) \implies Z \cap \xi \neq \emptyset$. We call
    the set of tight filters the \textit{tight spectrum}, and denote it by $\hat{E}_{\text{tight}}^S$.
\end{definition}
This definition may appear a bit contrived, but the next theorem hopes to hint at its significance.

\begin{theorem} $\hat{E}_{\text{tight}}$ is the closure of $\hat{E}_\infty$ in $\hat{E}_0$. \end{theorem}
\begin{proof}
    We show that a filter $\xi \in \overline{\hat{E}}_\infty \iff \xi \in \hat{E}_{\text{tight}}$. First
    the forward implication. Let $\xi \in \overline{\hat{E}}_\infty$ and suppose $\xi \in \mathcal{U}(\{x\}, Y)$.
    We prove the contrapositive of our definition for tightness. Let $Z \subseteq E^{\{x\}, Y}$, and suppose $Z \cap \xi = \emptyset$.
    Then $\xi \in \mathcal{U}(\{x\}, Y \cup Z)$. Since $\xi \in \overline{\hat{E}}_\infty$, we can find an ultrafilter
    $\eta \in \mathcal{U}(\{x\}, Y \cup Z)$. By Remark 3.3, for every $f \in Y \cup Z$, we can find an idempotent $e_f \in \eta$
    with $f e_f = 0$. Define $e := \left( \prod_{f \in Y \cup Z} e_f \right) x$. $e \leq x$ and $ey = 0 \ \forall y \in Y$, so
    $e \in E^{\{x\}, Y}$, but $ez = 0 \ \forall z \in Z$. So $Z$ is not a finite cover of $E^{\{x\}, Y}$, thus $\xi$ is a tight filter,
    hence $\overline{\hat{E}}_\infty \subseteq \hat{E}_{\text{tight}}$.
    
\end{proof}

\section{Directed Graphs}

\begin{lemma} If $(\alpha, \alpha)(\beta, \beta) \neq 0$ and $|\alpha| = |\beta|$, then $\alpha = \beta$. \end{lemma}
\begin{proof}
    Without loss of generality, suppose $\alpha$ is a prefix of $\beta$. Then $\alpha = \beta \beta'$ for some $\beta$. But
    $|\alpha| = |\beta|$, so $|\beta'| = 0$, meaning $\beta' = s(\beta)$. Thus $\alpha = \beta s(\beta) = \beta$.
\end{proof}
An immediate consequence of this is that for any given length, a filter contains at most one element corresponding
to a path of that length. Furthermore, if $\zeta$ is a filter, and $(\alpha, \alpha) \in \zeta$ such that $|\alpha| = n$,
we can restrict $\alpha$ to any length $0 \leq m < n$ to produce a unique element of length $m$ inside $\zeta$.

\begin{theorem} $\hat{E}_0 = \{\xi_\alpha$: $\alpha \in E^*\} \cup \{\eta_x$: $x \in E^\infty\}$ \end{theorem}
\begin{proof}
    First we show that $\xi_\alpha$ and $\eta_x$ are filters. Let $\alpha$ be a finite path and let $x$ be an infinite path.
    Consider $(\beta, \beta), \ (\gamma, \gamma) \in \xi_\alpha$ with $|\beta| = m$, $|\gamma| = n$. 
    Reading edges left to right, $\beta$ contains the first $m$ edges of $\alpha$ and $\gamma$ 
    contains the first $n$ edges of $\alpha$. Without loss of generality, assume $m \leq n$. 
    We can extend $\beta$ by the next $n - m$ edges of $\alpha$ to produce $\gamma$. Thus
    $\beta$ is a prefix of $\gamma$, so $(\beta, \beta)(\gamma, \gamma) = (\gamma, \gamma) \in \xi_\alpha$.
    A similar argument shows that $\eta_x$ is closed under multiplication. So both $\xi_\alpha$ and $\eta_x$ are prefilters
    on $E(S(E))$. Next, let $(\beta, \beta) \in \xi_\alpha$, and let $(\delta, \delta) \in E(S(E))$ so that 
    $(\beta, \beta) \leq (\delta, \delta)$. Then $\beta = \delta \delta'$ for some $\delta' \in E^*$. 
    Thus $\alpha = \beta \beta' = \delta \delta' \beta'$. Therefore $\delta$ is a prefix of $\alpha$, so 
    $(\delta, \delta) \in \xi_\alpha$. Like before, a very similar argument works for $\eta_x$. So both 
    $\xi_\alpha$ and $\eta_x$ are filters. Going the other way, take a filter $\zeta \in \hat{E}_0$.
    We do this in cases.
    \\ \\
    \textit{Case $1$. $\zeta$ is finite.}
    Let $(\alpha, \alpha)$ be the minimum element inside $\zeta$. Since $\zeta$ is a filter,
    For $(\beta, \beta) \in E(S(E))$, $(\alpha, \alpha) \leq (\beta, \beta) \implies (\beta, \beta) \in \zeta$.
    However, by the definition of the minimal element, $(\beta, \beta) \in \zeta \implies (\alpha, \alpha) \leq (\beta, \beta)$.
    Thus $(\beta, \beta) \in \zeta$ if and only if $(\alpha, \alpha) \leq (\beta, \beta) \iff \beta$ is a prefix of $\alpha$. So $\zeta = \xi_\alpha$.
    \\ \\
    \textit{Case $2$. $\zeta$ is infinite.}
    By the lemma above, we can get an idea of what elements of $\zeta$ look like.
    For each nonnegative integer, $\zeta$ contains precisely one element corresponding
    to a path of that length. Because we require nonzero product between elements, every
    path in the filter is a prefix of every longer path also contained inside the filter.
    All of this given, we can find an $x \in E^\infty$ such that every path inside $\zeta$
    is a prefix of $x$. By the uniqueness of filter elements, it follows that $\zeta = \eta_x$.
    \\ \\
    We have shown that a nonempty subset $\zeta \subset E(S(E))$ is a filter if and only if
    it is of the form $\xi_\alpha$ or $\eta_x$. Thus $\hat{E}_0 = \{\xi_\alpha$: $\alpha \in E^*\} \cup \{\eta_x$: $x \in E^\infty\}$.
\end{proof}
Now that we know what filters look like on the graph inverse semigroup, the task of identifying ultrafilters becomes much simpler.

\begin{theorem} $\hat{E}_\infty = \{\eta_x$: $x \in E^\infty\} \cup \{\xi_\alpha$: $\alpha \in E^*$ and $|r^{-1}\{s(\alpha)\}| = 0 \}$ \end{theorem}
\begin{proof}
    We need only consider various kinds of filters, determining whether they are ultrafilters or not. We do this in cases.
    \\ \\
    \textit{Case $1$. $\xi_\alpha$, $|r^{-1}\{s(\alpha)\}| > 0$.} Take $e \in E^1$ such that $r(e) = s(\alpha)$. It is clear that
    $\xi_\alpha \subset \xi_{\alpha e}$. So $\xi_\alpha$ is not an ultrafilter.
    \\ \\
    \textit{Case $2$. $\xi_\alpha$, $|r^{-1}\{s(\alpha)\}| = 0$.} Suppose we can find $\zeta \in \hat{E}_0$ such that $\xi_\alpha \subset \zeta$.
    For $0 \leq i \leq |\alpha|$, $\zeta$ inherits its idempotent with the path corresponding to length $i$ from $\xi_\alpha$. So we can find an element $(\beta, \beta) \in \zeta$ with
    $|\beta| > |\alpha|$ and $(\alpha, \alpha)(\beta, \beta) \neq 0$. Thus $\beta = \alpha \alpha'$ for some $\alpha' \in E^*$. But no edges go to $s(\alpha)$, so we cannot
    construct $\alpha'$ with $r(\alpha') = s(\alpha)$. This is a contradiction, so $\xi_\alpha$ is an ultrafilter.
    \\ \\
    \textit{Case $3$. $\eta_x$, $x \in E^\infty$.} Suppose there exists $\zeta \in \hat{E}_0$ such that $\eta_x \subset \zeta$. Then we can find
    $(\beta, \beta) \in \zeta$ such that $(\beta, \beta) \notin \eta_x$. But $\eta_x$, as we showed before, contains an element $z$ corresponding to
    a path of length $|\beta|$. As a superset of $\eta_x$, $\zeta$ also contains $z$. By the lemma at the start, it follows that $(\beta, \beta) = z \in \eta_x$,
    which is a contradiction. So $\eta_x$ is an ultrafilter for all $x \in E^\infty$.
    \\ \\
    We have identified which filters are ultrafilters, showing that $\hat{E}_\infty = \{\xi_\alpha$: $\alpha \in E^*$ and $|r^{-1}\{s(\alpha)\}| = 0\} \cup \{\eta_x$: $x \in E^\infty\}$.
\end{proof}

\begin{theorem} Let $E$ be a directed graph, and $\alpha \in E^*$ such that $|r^{-1}\{s(\alpha)\}| = \infty$.
    Let $X, Y \subseteq_{\text{fin}} E(S(E))$, and $Z$ be a finite cover of $E^{X, Y}$.
If $\xi_\alpha \in \mathcal{U}(X, Y)$, then $\xi_\alpha \cap Z \neq \emptyset$. \end{theorem}
\begin{proof}
    Letting min$(X) = (x, x)$,
    \begin{align*}
        E^{X, Y} = \{ (xx', xx') \text{: } x' \in E^*, \ r(x') = s(x) \text{ and } (xx', xx')y = 0 \ \forall y \in Y \}
    \end{align*}

    Consider the set $C := \{ (\alpha b, \alpha b)\text{: } b \in E^1, \ s(\alpha) = r(b) \}$. By the assumption
    that $s(\alpha)$ is an infinite receiver, $C$ is infinite. Given $y \in Y$, let $\nu$ be the path corresponding to $y$.
    Since $\xi_\alpha \in \mathcal{U}(X, Y)$, $\nu$ is not a prefix of $\alpha$, and thus not a proper prefix of $\alpha b$ 
    for any $b$. Thus, if $(\alpha b, \alpha b)y \neq 0$, $\alpha b$ is a prefix of $\nu$. Then for $\beta \neq b$, 
    $\alpha \beta$ cannot be a prefix of $\nu$. So there is at most one element of $C$ such that ($\alpha b, \alpha b)y \neq 0$.
    By the assumption that $Y$ is finite, all but finitely many elements of $C$ are inside $E^{\{(x, x)\}, Y}$. Therefore, if $Z$
    is a cover of $E^{X, Y}$, $Z$ is an outer cover of the infinite set $E^{X, Y} \cap C$. Because $Z$ is finite, $\exists z \in Z$ 
    with $(\alpha b, \alpha b)z \neq 0$ for infinitely many $(\alpha b, \alpha b) \in E^{X, Y} \cap C$. If $\upsilon$ is the path corresponding to $z$,
    then for every $b$, either $\upsilon$ is a prefix of $\alpha b$, or $\alpha b$ is a prefix of $\upsilon$.
    All the $\alpha b$ are the same length with a different starting edge, so if one is a prefix of $\upsilon$,
    no other can be a prefix of $\upsilon$. So $\upsilon$ is a prefix of $\alpha b$ for infinitely many $b$. Thus $|\upsilon| \leq |\alpha| + 1$.
    If $|\upsilon| = |\alpha| + 1$, we have a contradiction: $b = \beta$ for all $(\alpha b, \alpha b), (\alpha \beta, \alpha, \beta) \in C$.
    Thus $|\upsilon| \leq |\alpha|$, so $\upsilon$ is a prefix of $\alpha$. Therefore $z = (\upsilon, \upsilon) \in \xi_\alpha$, so 
    $\xi_\alpha \cap Z \neq \emptyset$.
\end{proof}

\section{References}

\end{document}
